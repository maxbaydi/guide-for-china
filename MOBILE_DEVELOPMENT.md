# üì± –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è HanGuide

## –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∫ –ª–æ–∫–∞–ª—å–Ω–æ–º—É API

### –¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

- **–õ–æ–∫–∞–ª—å–Ω—ã–π IP**: `192.168.31.88`
- **API Gateway**: `http://192.168.31.88:4000`
- **User Service GraphQL**: `http://192.168.31.88:4002/graphql`
- **Dictionary Service**: `http://192.168.31.88:4001`

### ‚úÖ –ß—Ç–æ —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ

1. ‚úÖ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—â–µ–Ω—ã –∏ —Å–ª—É—à–∞—é—Ç –Ω–∞ –≤—Å–µ—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞—Ö (0.0.0.0)
2. ‚úÖ –ü–æ—Ä—Ç—ã –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è –Ω–∞ —Ö–æ—Å—Ç: 4000, 4001, 4002
3. ‚úÖ API –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ IP: `http://192.168.31.88:4000/health`
4. ‚úÖ –§–∞–π–ª `mobile/.env` –æ–±–Ω–æ–≤–ª—ë–Ω —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º IP –∞–¥—Ä–µ—Å–æ–º

### üî• –ï—Å–ª–∏ API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω —Å —Ç–µ–ª–µ—Ñ–æ–Ω–∞

#### –í–∞—Ä–∏–∞–Ω—Ç 1: –û—Ç–∫—Ä—ã—Ç—å –ø–æ—Ä—Ç—ã –≤ Windows Firewall (PowerShell —Å –ø—Ä–∞–≤–∞–º–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞)

```powershell
# –ó–∞–ø—É—Å—Ç–∏—Ç—å PowerShell –æ—Ç –∏–º–µ–Ω–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
cd C:\Users\jerem\OneDrive\–î–æ–∫—É–º–µ–Ω—Ç—ã\guide-for-china
.\infrastructure\scripts\allow-ports.ps1
```

#### –í–∞—Ä–∏–∞–Ω—Ç 2: –û—Ç–∫—Ä—ã—Ç—å –ø–æ—Ä—Ç—ã –≤—Ä—É—á–Ω—É—é

1. –û—Ç–∫—Ä–æ–π—Ç–µ **Windows Defender Firewall** ‚Üí **Advanced Settings**
2. –ù–∞–∂–º–∏—Ç–µ **Inbound Rules** ‚Üí **New Rule**
3. –í—ã–±–µ—Ä–∏—Ç–µ **Port** ‚Üí **TCP**
4. –£–∫–∞–∂–∏—Ç–µ –ø–æ—Ä—Ç—ã: **4000, 4001, 4002**
5. –í—ã–±–µ—Ä–∏—Ç–µ **Allow the connection**
6. –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –∫ **Private –∏ Domain** –ø—Ä–æ—Ñ–∏–ª—è–º
7. –ù–∞–∑–æ–≤–∏—Ç–µ –ø—Ä–∞–≤–∏–ª–æ "HanGuide Development"

#### –í–∞—Ä–∏–∞–Ω—Ç 3: –í—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å Firewall –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```powershell
# –í–ù–ò–ú–ê–ù–ò–ï: –¢–æ–ª—å–∫–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è!
netsh advfirewall set allprofiles state off
```

### üì± –ó–∞–ø—É—Å–∫ –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

#### 1. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—â–µ–Ω—ã

```bash
docker-compose up -d
docker ps  # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
```

#### 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Expo –≤ —Ä–µ–∂–∏–º–µ —Ç—É–Ω–Ω–µ–ª—è

```bash
cd mobile
npx expo start --tunnel --clear
```

#### 3. –û—Ç—Å–∫–∞–Ω–∏—Ä—É–π—Ç–µ QR –∫–æ–¥ –≤ Expo Go –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–∫–ª—é—á–∏—Ç—Å—è –∫ API –ø–æ –∞–¥—Ä–µ—Å—É `192.168.31.88`.

### üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API

#### –ò–∑ WSL/Linux:

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–æ–≤
./infrastructure/scripts/check-ports.sh

# –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
curl http://192.168.31.88:4000/health
```

#### –ò–∑ –±—Ä–∞—É–∑–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞:

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: `http://192.168.31.88:4000/health`

–î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
```json
{
  "status": "healthy",
  "uptime": 1234.56,
  "timestamp": "2025-10-14T09:27:13.895Z"
}
```

### üåê –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞

- API Health: http://192.168.31.88:4000/health
- GraphQL Playground: http://192.168.31.88:4002/graphql
- Dictionary API: http://192.168.31.88:4001/search?q=‰Ω†Â•Ω

### ‚ö†Ô∏è –í–∞–∂–Ω–æ

1. **–¢–µ–ª–µ—Ñ–æ–Ω –∏ –∫–æ–º–ø—å—é—Ç–µ—Ä –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ –æ–¥–Ω–æ–π WiFi —Å–µ—Ç–∏**
2. **–ï—Å–ª–∏ IP –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ –∏–∑–º–µ–Ω–∏—Ç—Å—è**, –æ–±–Ω–æ–≤–∏—Ç–µ `mobile/.env`:
   ```bash
   # –£–∑–Ω–∞—Ç—å –Ω–æ–≤—ã–π IP
   cmd.exe /c "ipconfig | findstr IPv4"
   
   # –û–±–Ω–æ–≤–∏—Ç—å mobile/.env
   API_BASE_URL=http://–ù–û–í–´–ô_IP:4000/api/v1
   GRAPHQL_URL=http://–ù–û–í–´–ô_IP:4002/graphql
   ```

3. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Expo** –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è `.env`:
   ```bash
   cd mobile
   npx expo start --clear
   ```

### üêõ Troubleshooting

#### –ü—Ä–æ–±–ª–µ–º–∞: "Network Error" –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ API –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Windows Firewall
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—â–µ–Ω—ã
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Docker Desktop

#### –ü—Ä–æ–±–ª–µ–º–∞: IP –∞–¥—Ä–µ—Å –∏–∑–º–µ–Ω–∏–ª—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –£–∑–Ω–∞—Ç—å —Ç–µ–∫—É—â–∏–π IP
cmd.exe /c "ipconfig | findstr IPv4"

# –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ mobile/.env —Å –Ω–æ–≤—ã–º IP
```

#### –ü—Ä–æ–±–ª–µ–º–∞: –ü–æ—Ä—Ç—ã –∑–∞–Ω—è—Ç—ã

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ù–∞–π—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å—ã –Ω–∞ –ø–æ—Ä—Ç–∞—Ö
netstat -ano | findstr :4000
netstat -ano | findstr :4001
netstat -ano | findstr :4002

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Docker
docker-compose down

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∑–∞–Ω–æ–≤–æ
docker-compose up -d
```

### üìù –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose ps

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
docker-compose logs -f api-gateway
docker-compose logs -f user-service

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å–µ—Ä–≤–∏—Å
docker-compose restart api-gateway

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å—ë
docker-compose down

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å –ø–µ—Ä–µ—Å–±–æ—Ä–∫–æ–π
docker-compose up -d --build
```

### üéØ –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

- ‚úÖ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—â–µ–Ω—ã
- ‚úÖ API –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ IP 192.168.31.88
- ‚úÖ Mobile .env –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω–æ –Ω—É–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å –ø–æ—Ä—Ç—ã –≤ Firewall

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ `http://192.168.31.88:4000/health`

- –ï—Å–ª–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è ‚Üí –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç! üéâ
- –ï—Å–ª–∏ –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è ‚Üí –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å Firewall (—Å–º. –≤—ã—à–µ)

