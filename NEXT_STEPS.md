# üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

## ‚úÖ –ß—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ

### 1. –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (100%)

- ‚úÖ Docker Compose —Å PostgreSQL, Redis, pgAdmin
- ‚úÖ PostgreSQL —Å pg_jieba —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º
- ‚úÖ –í—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—â–µ–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–Ω–æ—Ä–µ–ø–æ —Å–æ–∑–¥–∞–Ω–∞

### 2. i18n –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è (100%)

- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä—É—Å—Å–∫–æ–≥–æ –∏ –∫–∏—Ç–∞–π—Å–∫–æ–≥–æ —è–∑—ã–∫–æ–≤
- ‚úÖ –¢–∏–ø–∏–∑–∞—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤
- ‚úÖ –¢–µ—Å—Ç—ã –≥–æ—Ç–æ–≤—ã

### 3. DSL –ü–∞—Ä—Å–µ—Ä BKRS (100%)

- ‚úÖ –ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–∞—Ä—Å–µ—Ä
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö —Ç–µ–≥–æ–≤
- ‚úÖ –ü–æ—Ç–æ–∫–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- ‚úÖ –¢–µ—Å—Ç—ã –≥–æ—Ç–æ–≤—ã (40+ —Ç–µ—Å—Ç–æ–≤)

### 4. –°–∫—Ä–∏–ø—Ç –∞–Ω–∞–ª–∏–∑–∞ (100%)

- ‚úÖ –ê–Ω–∞–ª–∏–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã BKRS —Ñ–∞–π–ª–æ–≤
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –æ—Ç—á–µ—Ç—ã
- ‚úÖ –¢–µ—Å—Ç—ã –≥–æ—Ç–æ–≤—ã

## ‚ö†Ô∏è –í–ê–ñ–ù–û: –ü—Ä–æ–±–ª–µ–º–∞ —Å —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

–ò–∑-–∑–∞ —Å–µ—Ç–µ–≤—ã—Ö –ø—Ä–æ–±–ª–µ–º –Ω–µ —É–¥–∞–ª–æ—Å—å —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å npm –ø–∞–∫–µ—Ç—ã. –≠—Ç–æ –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤.

### –†–µ—à–µ–Ω–∏–µ

–ü–æ—Å–ª–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–µ—Ç–µ–≤–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
# 1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞
cd /mnt/c/Users/jerem/OneDrive/–î–æ–∫—É–º–µ–Ω—Ç—ã/guide-for-china

# 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è shared-types
cd packages/shared-types
npm install

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã –¥–ª—è i18n
npm test

# 4. –ï—Å–ª–∏ —Ç–µ—Å—Ç—ã –ø—Ä–æ—à–ª–∏, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è dictionary service
cd ../../services/dictionary
npm install

# 5. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã –¥–ª—è DSL –ø–∞—Ä—Å–µ—Ä–∞
npm test

# 6. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—à–ª–∏
cd ../..
npm test --workspaces
```

**–û–∂–∏–¥–∞–µ—Ç—Å—è: –≤—Å–µ 40+ —Ç–µ—Å—Ç–æ–≤ –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–π—Ç–∏ —É—Å–ø–µ—à–Ω–æ ‚úÖ**

## üöÄ –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤

### –°–ª–µ–¥—É—é—â–∞—è –∑–∞–¥–∞—á–∞: –°–æ–∑–¥–∞–Ω–∏–µ Dictionary Service

#### 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è NestJS –ø—Ä–æ–µ–∫—Ç–∞

```bash
cd services
npx @nestjs/cli new dictionary --skip-git --package-manager npm
```

–ò–ª–∏ —Å–æ–∑–¥–∞—Ç—å –≤—Ä—É—á–Ω—É—é —Ñ–∞–π–ª—ã NestJS (–µ—Å–ª–∏ nest CLI –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω).

#### 2. Prisma —Å—Ö–µ–º–∞

–°–æ–∑–¥–∞—Ç—å `services/dictionary/prisma/schema.prisma`:

```prisma
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Character {
  id           String   @id @default(uuid())
  simplified   String   @unique
  traditional  String?
  pinyin       String?
  hskLevel     Int?
  frequency    Int?
  searchVector Unsupported("tsvector")?
  createdAt    DateTime @default(now())
  
  definitions  Definition[]
  examples     Example[]
  
  @@index([simplified])
  @@index([pinyin])
}

model Definition {
  id           String    @id @default(uuid())
  characterId  String
  character    Character @relation(fields: [characterId], references: [id], onDelete: Cascade)
  translation  String    @db.Text
  partOfSpeech String?
  context      String?
  order        Int       @default(0)
}

model Example {
  id          String    @id @default(uuid())
  characterId String
  character   Character @relation(fields: [characterId], references: [id], onDelete: Cascade)
  chinese     String    @db.Text
  pinyin      String?   @db.Text
  russian     String    @db.Text
  source      String?
}

model Phrase {
  id           String   @id @default(uuid())
  russian      String   @db.Text
  chinese      String   @db.Text
  pinyin       String?  @db.Text
  context      String?
  searchVector Unsupported("tsvector")?
  createdAt    DateTime @default(now())
  
  @@index([russian])
}
```

#### 3. –ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–π

```bash
cd services/dictionary
npx prisma migrate dev --name init
```

#### 4. –°–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ –∏–º–ø–æ—Ä—Ç–∞ BKRS

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É–∂–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–π DSL –ø–∞—Ä—Å–µ—Ä –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö:

```typescript
// services/dictionary/src/scripts/import-bkrs.ts
import { PrismaClient } from '@prisma/client';
import { createDslParser } from '../utils/dsl-parser';
import * as path from 'path';

const prisma = new PrismaClient();

async function importBkrs() {
  const parser = createDslParser();
  
  // –ü—É—Ç—å –∫ —Ñ–∞–π–ª–∞–º BKRS
  const dabkrsPath = path.join(__dirname, '../../../../db_bkrs/dabkrs_251013/dabkrs_251013');
  
  let batch = [];
  let count = 0;
  
  for await (const entry of parser.parseFile(dabkrsPath)) {
    batch.push(entry);
  
    if (batch.length >= 1000) {
      // –ò–º–ø–æ—Ä—Ç –±–∞—Ç—á–∞
      await importBatch(batch);
      count += batch.length;
      console.log(`Imported ${count} entries...`);
      batch = [];
    }
  }
  
  // –ò–º–ø–æ—Ä—Ç –æ—Å—Ç–∞—Ç–∫–∞
  if (batch.length > 0) {
    await importBatch(batch);
    count += batch.length;
  }
  
  console.log(`‚úÖ Total imported: ${count} entries`);
}

async function importBatch(entries) {
  // –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –±–∞—Ç—á-–∏–º–ø–æ—Ä—Ç–∞
  // ...
}

importBkrs()
  .then(() => process.exit(0))
  .catch((error) => {
    console.error(error);
    process.exit(1);
  });
```

## üìã –ß–µ–∫-–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ–º

- [ ] –°–µ—Ç–µ–≤–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
- [ ] npm –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- [ ] –í—Å–µ —Ç–µ—Å—Ç—ã (40+) –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ
- [ ] Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—â–µ–Ω—ã
- [ ] PostgreSQL –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ localhost:5432
- [ ] Redis –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ localhost:6379

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **–°–µ—Ç–µ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å npm** - –†–µ—à–µ–Ω–∏–µ: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å VPN –∏–ª–∏ –∫–∏—Ç–∞–π—Å–∫–æ–µ –∑–µ—Ä–∫–∞–ª–æ:

   ```bash
   npm config set registry https://registry.npmmirror.com
   ```
2. **–ú–µ–¥–ª–µ–Ω–Ω–∞—è —Å–±–æ—Ä–∫–∞ Docker** - pg_jieba –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è ~60 —Å–µ–∫—É–Ω–¥, —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ

## üìû –ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å?

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `PROGRESS.md` –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Docker: `docker-compose logs -f`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–µ—Å—Ç—ã: `npm test`

## üéâ –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ç–µ–∫—É—â–∏—Ö —à–∞–≥–æ–≤

–ú—ã –ø–µ—Ä–µ–π–¥–µ–º –∫:

- GraphQL API –¥–ª—è Dictionary Service
- API Gateway —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- User Service —Å JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π
- Subscription Service —Å –ø–ª–∞—Ç–µ–∂–∞–º–∏

**–û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏:** –§–∞–∑–∞ 2 (Dictionary Service) –∑–∞–π–º–µ—Ç ~5-6 –¥–Ω–µ–π –∞–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.
